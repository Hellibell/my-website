<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡πÑ‡∏õ Discord</title>
  <style>
    body {
      background: #111;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
    }
    .container {
      margin-top: 30px;
    }
    button {
      padding: 10px 20px;
      background: #3EFF00;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      margin: 10px 5px 0 5px;
    }
    button:hover {
      background: #2ECC00;
    }
    input {
      padding: 8px;
      border-radius: 6px;
      border: none;
      margin: 5px 0;
      width: 80%;
      max-width: 400px;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    pre {
      text-align: left;
      background: #222;
      padding: 10px;
      border-radius: 6px;
      max-height: 300px;
      overflow-y: auto;
      width: 90%;
      margin: 20px auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å API ‡πÑ‡∏õ Discord</h2>

    <label>Webhook URL:</label>
    <input type="text" id="webhook" placeholder="‡πÉ‡∏™‡πà Discord Webhook ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà"><br>

    <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏π‡∏õ:</label>
    <input type="number" id="num_images" value="5" min="1" max="50"><br>

    <button id="sendBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ</button>

    <pre id="log"></pre>
  </div>

  <script>
    const api_url = "https://random-nsfw.hellibell38.workers.dev/";
    const delay_between = 200; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≤‡∏¢‡∏ï‡∏±‡∏ß 200 ms

    function log(msg) {
      const logBox = document.getElementById("log");
      logBox.textContent += msg + "\n";
      logBox.scrollTop = logBox.scrollHeight;
    }

    async function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function sendUniqueImages() {
      const webhook = document.getElementById("webhook").value.trim();
      const num_images = parseInt(document.getElementById("num_images").value);

      if (!webhook) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà Webhook URL ‡∏Å‡πà‡∏≠‡∏ô");
        return;
      }

      const sent_urls = new Set();

      for (let i = 1; i <= num_images;) {
        try {
          const res = await fetch(api_url, { headers: { "X-Requested-With": "XMLHttpRequest" } });
          if (!res.ok) throw new Error("‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
          const data = await res.json();
          const img_url = data.content.url;

          if (sent_urls.has(img_url)) {
            log(`‡∏£‡∏π‡∏õ‡∏ã‡πâ‡∏≥ ‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ`);
            continue;
          }
          sent_urls.add(img_url);

          const payload = {
            content: `‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ ${i}/${num_images} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéâ`,
            embeds: [
              {
                title: `‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà ${i}`,
                image: { url: img_url },
                color: 0x3EFF00
              }
            ]
          };

          const resp = await fetch(webhook, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
          });

          if (resp.status === 204) {
            log(`‚úÖ ‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ ${i} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`);
          } else {
            log(`‚ùå ‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ ${i} ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (status ${resp.status})`);
          }

          i++;
        } catch (err) {
          log(`‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ ${i}: ${err}`);
        }

        await sleep(delay_between);
      }
    }

    document.getElementById("sendBtn").addEventListener("click", sendUniqueImages);
  </script>
</body>
</html>
