<!DOCTYPE html>
<html>
<body>
  <h2>ฝากรูปไปยัง GitHub CDN</h2>
  <input type="file" id="fileInput" />
  <button onclick="upload()">อัปโหลด</button>

  <script>
  async function upload() {
    const file = document.getElementById("fileInput").files[0];
    if (!file) return alert("กรุณาเลือกรูป");

    const base64 = await toBase64(file);
    const filename = file.name;

    const res = await fetch(`https://api.github.com/repos/<USERNAME>/cdn-images/contents/images/${filename}`, {
      method: "PUT",
      headers: {
        "Authorization": "token <YOUR_GITHUB_TOKEN>",
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        message: `upload ${filename}`,
        content: base64.replace(/^data:.+;base64,/, "")
      })
    });

    const data = await res.json();
    alert(`อัปโหลดสำเร็จ! URL: https://raw.githubusercontent.com/<USERNAME>/cdn-images/main/images/${filename}`);
  }

  function toBase64(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.onload = () => resolve(reader.result);
      reader.onerror = reject;
      reader.readAsDataURL(file);
    });
  }
  </script>
</body>
</html>
